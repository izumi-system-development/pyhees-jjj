<!--
Sync Impact Report:
- Version change: 初期版 → 1.0.0
- 新規作成: 全セクション
- 追加セクション: 全て（初期作成）
- 削除セクション: なし
- テンプレート更新状況:
  ✅ .specify/templates/plan-template.md - 憲法チェック項目を確認済み
  ✅ .specify/templates/spec-template.md - 仕様テンプレートとの整合性確認済み
  ✅ .specify/templates/tasks-template.md - タスクテンプレートとの整合性確認済み
- フォローアップTODO: なし
-->

# pyhees-jjj Constitution

## Core Principles

### I. 科学的計算の正確性
建築物のエネルギー消費性能計算における数値的正確性を最優先とする。
すべての計算ロジックは建築研究所の公式算定方法に準拠し、検証可能でなければならない。
計算結果の再現性を保証するため、入力データと計算過程を完全に記録する。

### II. 二言語対応ドキュメント
すべてのドキュメント、コメント、エラーメッセージは日本語で記述する。
技術仕様書、API文書、ユーザーガイドは日本語を主言語とし、必要に応じて英語併記する。
コード内コメントは日本語で記述し、変数名・関数名は英語を使用する。

### III. テスト駆動開発 (必須)
すべての計算機能は実装前にテストケースを作成する。
建築研究所の公式計算例との比較検証を必須とする。
数値計算の精度要件（有効桁数、丸め誤差）を明確に定義し、テストで検証する。

### IV. モジュール化設計
計算機能は独立したモジュールとして設計し、単体テストが可能な構造とする。
各モジュールは明確な責任範囲を持ち、他モジュールとの依存関係を最小化する。
共通計算ロジックの重複を避け、再利用可能なコンポーネントとして実装する。

### V. 検証可能性
すべての計算結果は元の算定方法文書にトレーサブルでなければならない。
計算過程の中間結果を出力し、手計算での検証を可能にする。
入力データの妥当性チェックを実装し、不正な値での計算を防止する。

## 技術要件

### Python環境
- Python 3.12.11以上を使用する
- 数値計算ライブラリ（numpy, pandas, scipy）のバージョンを固定する
- 依存関係はpoetryで管理し、再現可能な環境を保証する

### コード品質
- 型ヒント（Type Hints）を必須とする
- pydanticを使用したデータ検証を実装する
- 計算精度に影響する浮動小数点演算は明示的に処理する

## 開発プロセス

### 機能開発フロー
1. 建築研究所の算定方法文書から要件を抽出
2. 計算仕様書を日本語で作成
3. テストケース（期待値含む）を先行作成
4. 実装とテストの反復
5. 公式計算例との検証

### 品質保証
- すべてのPRは計算精度の検証を含む
- 数値結果の変更は必ず根拠を文書化する
- 回帰テストで既存機能の精度維持を確認する

## Governance

この憲法はすべての開発プラクティスに優先する。
憲法の改正は文書化、承認、移行計画を必要とする。
すべてのPR・レビューは憲法への準拠を検証しなければならない。
複雑性の導入は十分な正当化を必要とする。

**Version**: 1.0.0 | **Ratified**: 2025-10-09 | **Last Amended**: 2025-10-09